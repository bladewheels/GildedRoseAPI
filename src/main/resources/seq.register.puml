@startuml
skinparam sequence {
responseMessageBelowArrow true
ActorBorderColor Black
CollectionsBorderColor Silver
LifeLineBorderColor Blue
ParticipantBackgroundColor WhiteSmoke
ParticipantBorderColor Black
}
autonumber

title Registration
header Gilded Rose API Â©2021

actor API_User
participant PublicWebController
participant UserService
collections User_Collection #D3D3D3

API_User -[#0000FF]> PublicWebController : POST email address to /register
note right of API_User
 Valid emails, for //demo// purposes:
   - ""customer_x@go.to""
   - ""customer_x@the.wang""
   - ""customer_x@us.online""
   - ""customer_x@cheese.pizza""
end note
activate PublicWebController
PublicWebController <-- PublicWebController : generate UUID
PublicWebController <-- PublicWebController : create User w/UUID
PublicWebController -[#0000FF]> UserService : save(User)
activate UserService
UserService -[#0000FF]> User_Collection : put(UUID, User)
UserService <[DarkGreen]-- User_Collection : return
PublicWebController <[DarkGreen]-- UserService : return
deactivate UserService
API_User <[DarkGreen]-- PublicWebController : return UUID as API token
deactivate PublicWebController
@enduml
