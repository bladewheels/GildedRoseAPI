@startuml
skinparam responseMessageBelowArrow true
autonumber

title Registration
header Gilded Rose API Â©2021

actor API_User
participant PublicWebController
participant UserService
collections User_Collection

API_User -[#blue]> PublicWebController : POST email address to /register
note right of API_User
 Valid emails, for //demo// purposes:
   - ""customer_x@go.to""
   - ""customer_x@the.wang""
   - ""customer_x@us.online""
   - ""customer_x@cheese.pizza""
end note
activate PublicWebController
PublicWebController <-- PublicWebController : generate UUID
PublicWebController <-- PublicWebController : create User w/UUID
PublicWebController -[#blue]> UserService : save(User)
activate UserService
UserService -[#blue]> User_Collection : put(UUID, User)
UserService <[#green]-- User_Collection : return
PublicWebController <[#green]-- UserService : return
deactivate UserService
API_User <[#green]-- PublicWebController : return UUID as API token
deactivate PublicWebController
@enduml
